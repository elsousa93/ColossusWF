{
    "actions": [{
        "className": "org.joget.apps.datalist.lib.FormRowDeleteDataListAction",
        "icon": "<i class=\"fas fa-trash-alt\"><\/i>",
        "id": "action_0",
        "label": "Delete",
        "name": "Form Row Delete Action",
        "properties": {
            "abortRelatedRunningProcesses": "",
            "confirmation": "",
            "datalist_type": "action",
            "deleteFiles": "",
            "deleteGridData": "",
            "deleteSubformData": "",
            "formDefId": "importacao_certificados_reg",
            "label": "ELIMINAR"
        },
        "type": "text"
    }],
    "binder": {
        "className": "org.joget.plugin.enterprise.JdbcDataListBinder",
        "properties": {
            "jdbcDatasource": "default",
            "optimisePaging": "",
            "primaryKey": "id",
            "sql": "SELECT id, c_entidade, c_ficheiro_certificado, c_data_validacao, c_notas FROM app_fd_certificados_reg"
        }
    },
    "buttonPosition": "bottomLeft",
    "checkboxPosition": "left",
    "columns": [
        {
            "action": {
                "className": "",
                "properties": {}
            },
            "alignment": "",
            "datalist_type": "column",
            "exclude_export": "",
            "filterable": true,
            "format": {
                "className": "org.joget.plugin.enterprise.OptionsValueFormatter",
                "properties": {
                    "options": [],
                    "optionsBinder": {
                        "className": "org.joget.plugin.enterprise.UserOptionsBinder",
                        "properties": {
                            "addEmptyOption": "",
                            "cacheInterval": "",
                            "deptId": "",
                            "emptyLabel": "",
                            "groupId": "",
                            "grouping": "",
                            "optionLabel": "fullname",
                            "orgId": "",
                            "useAjax": ""
                        }
                    }
                }
            },
            "headerAlignment": "",
            "hidden": "false",
            "id": "column_0",
            "label": "Entidade",
            "name": "c_entidade",
            "sortable": "false",
            "style": "",
            "width": ""
        },
        {
            "action": {
                "className": "",
                "properties": {}
            },
            "alignment": "",
            "datalist_type": "column",
            "exclude_export": "",
            "filterable": true,
            "format": {
                "className": "org.joget.tutorial.FileLinkDatalistFormatter",
                "properties": {
                    "attachment": "true",
                    "formDefId": "importacao_certificados_reg"
                }
            },
            "headerAlignment": "",
            "hidden": "false",
            "id": "column_1",
            "label": "Certificado",
            "name": "c_ficheiro_certificado",
            "sortable": "false",
            "style": "",
            "width": ""
        },
        {
            "action": {
                "className": "",
                "properties": {}
            },
            "alignment": "",
            "datalist_type": "column",
            "exclude_export": "",
            "filterable": true,
            "format": {
                "className": "",
                "properties": {}
            },
            "headerAlignment": "",
            "hidden": "false",
            "id": "column_4",
            "label": "Data de Validação",
            "name": "c_data_validacao",
            "sortable": "false",
            "style": "",
            "width": ""
        },
        {
            "action": {
                "className": "",
                "properties": {}
            },
            "alignment": "",
            "datalist_type": "column",
            "exclude_export": "",
            "filterable": true,
            "format": {
                "className": "",
                "properties": {}
            },
            "headerAlignment": "",
            "hidden": "false",
            "id": "column_3",
            "label": "Notas",
            "name": "c_notas",
            "sortable": "false",
            "style": "",
            "width": ""
        }
    ],
    "considerFilterWhenGetTotal": "",
    "description": "",
    "disableResponsive": "",
    "filters": [{
        "datalist_type": "filter",
        "filterParamName": "d-5340970-fn_c_entidade",
        "hidden": "",
        "id": "filter_0",
        "label": "Entidade",
        "name": "c_entidade",
        "type": {
            "className": "org.joget.plugin.enterprise.SelectBoxDataListFilterType",
            "properties": {
                "defaultValue": "",
                "multiple": "autocomplete",
                "options": [],
                "optionsBinder": {
                    "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                    "properties": {
                        "cacheInterval": "",
                        "script": "import org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.FormRow;\r\nimport org.joget.apps.form.model.FormRowSet;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.apps.app.model.AppDefinition;\r\nimport org.joget.commons.util.LogUtil;\r\nimport org.joget.directory.model.service.ExtDirectoryManager;\r\nimport org.joget.plugin.base.Plugin;\r\nimport org.joget.plugin.base.PluginManager;\r\nimport org.joget.directory.model.User;\r\n\r\n \r\npublic FormRowSet load(String[] values) {\r\n    \r\n    //LogUtil.info(\"String\", \"TESTEEEE \" );\r\n    \r\n    FormRowSet rows = new FormRowSet();\r\n    \r\n    FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"\");\r\n    rows.add(option);\r\n    \r\n    String value = \"\";\r\n    String label = \"\";\r\n        \r\n    AppDefinition appDef = AppUtil.getCurrentAppDefinition();\r\n    \r\n    PluginManager pluginManager = (PluginManager) AppUtil.getApplicationContext().getBean(\"pluginManager\");\r\n    ExtDirectoryManager directoryManager = (ExtDirectoryManager) pluginManager.getBean(\"directoryManager\");\r\n    \r\n    String[] array_entidades= {\"PL_EXT_ENT_A\",\"PL_EXT_ENT_NA\",\"PL_EXT_ENT_SA\"};\r\n    String label = \"\";\r\n    \r\n    for(i = 0; i < array_entidades.length; i++){\r\n        \r\n        //LogUtil.info(\"String\", \"DPT: \" + array_entidades[i]);\r\n        String deptId = array_entidades[i];\r\n        \r\n        Collection userList = directoryManager.getUserByDepartmentId(deptId);\r\n        for(Object u : userList) {\r\n            User user = (User) u;\r\n            FormRow option = new FormRow();\r\n            \r\n            value = user.getFirstName() + \" \" + user.getLastName();\r\n            label = user.getFirstName() + \" \" + user.getLastName();\r\n            \r\n            //LogUtil.info(\"String\", \"Username: \" + user.getUsername());\r\n            \r\n            option.setProperty(FormUtil.PROPERTY_VALUE, value);\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, label);\r\n            rows.add(option);\r\n        }\r\n        \r\n    }\r\n\r\n    return rows;\r\n}\r\n \r\n//call load method with injected variable\r\nreturn load(values);",
                        "useAjax": ""
                    }
                },
                "size": ""
            }
        }
    }],
    "hidePageSize": "",
    "id": "list_certificados_reg",
    "name": "Registos - Repositório de Certificados",
    "order": "",
    "orderBy": "",
    "pageSize": "0",
    "pageSizeSelectorOptions": "10,20,30,40,50,100",
    "responsiveView": [
        {
            "breakpoint": "",
            "columns": "",
            "view": "Mobile"
        },
        {
            "breakpoint": "",
            "columns": "",
            "view": "Tablet"
        }
    ],
    "rowActions": [],
    "searchPopup": "",
    "showDataWhenFilterSet": "",
    "showPageSizeSelector": "true",
    "useSession": ""
}