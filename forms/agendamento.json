{
    "className": "org.joget.apps.form.model.Form",
    "elements": [{
        "className": "org.joget.apps.form.model.Section",
        "elements": [{
            "className": "org.joget.apps.form.model.Column",
            "elements": [
                {
                    "className": "org.joget.apps.form.lib.HiddenField",
                    "properties": {
                        "id": "flag_alerta_agendamento",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {},
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "useDefaultWhenEmpty": "",
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.HiddenField",
                    "properties": {
                        "id": "flag_alerta_agendamento_swift",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {},
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "useDefaultWhenEmpty": "",
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field18",
                        "label": "",
                        "value": "<div id=\"myErrorMsg\" class=\"alert alert-error\" role=\"alert\">\r\n  Existem erros de validação\r\n<\/div>\r\n<style>\r\n#myErrorMsg{\r\n    display:none;\r\n}\r\n<\/style>"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.Radio",
                    "properties": {
                        "controlField": "",
                        "id": "urgencia_agendamento",
                        "label": "Urgência de Agendamento",
                        "options": [
                            {
                                "grouping": "",
                                "label": "Sim",
                                "value": "SIM"
                            },
                            {
                                "grouping": "",
                                "label": "Não",
                                "value": "NAO"
                            }
                        ],
                        "optionsBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.SelectBox",
                    "properties": {
                        "controlField": "",
                        "id": "distrito",
                        "label": "Distrito",
                        "multiple": "",
                        "options": [],
                        "optionsBinder": {
                            "className": "org.joget.apps.form.lib.FormOptionsBinder",
                            "properties": {
                                "addEmptyOption": "true",
                                "cacheInterval": "",
                                "emptyLabel": "",
                                "extraCondition": "",
                                "formDefId": "distritosConcelhos",
                                "groupingColumn": "",
                                "idColumn": "distrito",
                                "labelColumn": "distrito",
                                "useAjax": ""
                            }
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.SelectBox",
                    "properties": {
                        "controlField": "distrito",
                        "id": "concelho",
                        "label": "Concelho",
                        "multiple": "",
                        "options": [],
                        "optionsBinder": {
                            "className": "org.joget.apps.form.lib.FormOptionsBinder",
                            "properties": {
                                "addEmptyOption": "true",
                                "cacheInterval": "",
                                "emptyLabel": "",
                                "extraCondition": "",
                                "formDefId": "distritosConcelhos",
                                "groupingColumn": "distrito",
                                "idColumn": "concelho",
                                "labelColumn": "concelho",
                                "useAjax": "true"
                            }
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.Radio",
                    "properties": {
                        "controlField": "",
                        "id": "contacto",
                        "label": "Contactar",
                        "options": [
                            {
                                "grouping": "",
                                "label": "Cliente",
                                "value": "CLT"
                            },
                            {
                                "grouping": "",
                                "label": "Balcão",
                                "value": "BLC"
                            },
                            {
                                "grouping": "",
                                "label": "Ambos",
                                "value": "ABS"
                            }
                        ],
                        "optionsBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "encryption": "",
                        "id": "telefone_cliente",
                        "label": "Telefone do Cliente",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "org.joget.apps.form.lib.BeanShellValidator",
                            "properties": {
                                "decoration": "*",
                                "script": "return true;"
                            }
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "encryption": "",
                        "id": "email_cliente",
                        "label": "Email do Cliente",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "org.joget.apps.form.lib.BeanShellValidator",
                            "properties": {
                                "decoration": "*",
                                "script": "return true;"
                            }
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextArea",
                    "properties": {
                        "cols": "20",
                        "id": "motivo_urgencia_agendamento",
                        "label": "Motivo de Urgência de Agendamento",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "rows": "5",
                        "validator": {
                            "className": "org.joget.apps.form.lib.BeanShellValidator",
                            "properties": {
                                "decoration": "",
                                "script": "import java.util.Arrays;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.Form;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.commons.util.LogUtil;\r\n  \r\npublic boolean validate(Element element, FormData formData, String[] fileUploadValues) {\r\n    boolean result = true;\r\n     \r\n    //get dropdown select box value\r\n    String field1Id = \"urgencia_agendamento\";\r\n    Form form = FormUtil.findRootForm(element);\r\n    Element field1 = FormUtil.findElement(field1Id, form, formData);\r\n  \r\n    if (field1 != null) {\r\n        //get value of field 1\r\n        String[] field1Values = FormUtil.getElementPropertyValues(field1, formData);\r\n  \r\n        /*if(field1Values[0].equalsIgnoreCase(\"sim\") && fileUploadValues[0].isEmpty() ){*/\r\n        if(field1Values.length != 0 && fileUploadValues.length != 0){\r\n            if(field1Values[0].equalsIgnoreCase(\"sim\")  && fileUploadValues[0].isEmpty()){\r\n                String id = FormUtil.getElementParameterName(element);\r\n                formData.addFormError(id, \"Campo obrigatório quando existe Urgência de Agendamento\");\r\n                result = false;\r\n            }\r\n        }\r\n    } else {\r\n        //ignore if the dropdown does not exist\r\n    }\r\n  \r\n    return result;\r\n}\r\n  \r\n//call validate method with injected variable\r\nreturn validate(element, formData, values);"
                            }
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.DatePicker",
                    "properties": {
                        "allowManual": "true",
                        "currentDateAs": "",
                        "dataFormat": "yyyy-MM-dd",
                        "datePickerType": "",
                        "endDateFieldId": "",
                        "format": "dd/mm/yy",
                        "id": "data_pre_agendamento",
                        "label": "Data de Pre-Agendamento",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {
                                "permissionHidden": "true",
                                "readonly": ""
                            },
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "startDateFieldId": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": "",
                        "yearRange": "c-10:c+10"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.DatePicker",
                    "properties": {
                        "allowManual": "true",
                        "currentDateAs": "",
                        "dataFormat": "yyyy-MM-dd",
                        "datePickerType": "dateTime",
                        "endDateFieldId": "",
                        "format": "dd/mm/yy",
                        "format24hr": "true",
                        "id": "data_agendamento",
                        "label": "Data de Agendamento",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "startDateFieldId": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": "",
                        "yearRange": "c-10:c+10"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.SelectBox",
                    "properties": {
                        "controlField": "",
                        "id": "estado_agendamento",
                        "label": "Estado de Agendamento",
                        "multiple": "",
                        "options": [],
                        "optionsBinder": {
                            "className": "org.joget.apps.form.lib.FormOptionsBinder",
                            "properties": {
                                "addEmptyOption": "true",
                                "cacheInterval": "",
                                "emptyLabel": "",
                                "extraCondition": "c_nome_campo = 'estado_agendamento' AND e.customProperties.servico LIKE '%CH%'",
                                "formDefId": "adicionarOpcaoLV",
                                "groupingColumn": "",
                                "idColumn": "value",
                                "labelColumn": "label",
                                "useAjax": ""
                            }
                        },
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.Radio",
                    "properties": {
                        "controlField": "",
                        "id": "reagendamento",
                        "label": "Reagendamento",
                        "options": [
                            {
                                "grouping": "",
                                "label": "Sim",
                                "value": "SIM"
                            },
                            {
                                "grouping": "",
                                "label": "Não",
                                "value": "NAO"
                            },
                            {
                                "grouping": "",
                                "label": "Por Validar",
                                "value": "VAL"
                            }
                        ],
                        "optionsBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.SelectBox",
                    "properties": {
                        "controlField": "",
                        "id": "motivo_Reagendamento",
                        "label": "Motivo da Desmarcação",
                        "multiple": "",
                        "options": [],
                        "optionsBinder": {
                            "className": "org.joget.apps.form.lib.FormOptionsBinder",
                            "properties": {
                                "addEmptyOption": "true",
                                "cacheInterval": "",
                                "emptyLabel": "",
                                "extraCondition": "c_nome_campo = 'motivo_reagendamento'",
                                "formDefId": "adicionarOpcaoLV",
                                "groupingColumn": "",
                                "idColumn": "value",
                                "labelColumn": "label",
                                "useAjax": ""
                            }
                        },
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "validator": {
                            "className": "org.joget.apps.form.lib.BeanShellValidator",
                            "properties": {
                                "decoration": "",
                                "script": "import java.util.Arrays;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.Form;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.service.FormUtil;\r\n  \r\npublic boolean validate(Element element, FormData formData, String[] fileUploadValues) {\r\n    boolean result = true;\r\n     \r\n    //get dropdown select box value\r\n    String field1Id = \"reagendamento\";\r\n    Form form = FormUtil.findRootForm(element);\r\n    Element field1 = FormUtil.findElement(field1Id, form, formData);\r\n  \r\n    if (field1 != null) {\r\n        //get value of field 1\r\n        String[] field1Values = FormUtil.getElementPropertyValues(field1, formData);\r\n        if(field1Values.length != 0 && fileUploadValues.length != 0){\r\n            if(field1Values[0].equalsIgnoreCase(\"sim\") && fileUploadValues[0].isEmpty() ){\r\n                String id = FormUtil.getElementParameterName(element);\r\n                formData.addFormError(id, \"Campo obrigatório quando existe Reagendamento\");\r\n                result = false;\r\n            }\r\n        }\r\n    } else {\r\n        //ignore if the dropdown does not exist\r\n    }\r\n  \r\n    return result;\r\n}\r\n  \r\n//call validate method with injected variable\r\nreturn validate(element, formData, values);"
                            }
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextArea",
                    "properties": {
                        "cols": "20",
                        "id": "observacoes_agendamento",
                        "label": "Observações do Agendamento",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {
                                "permissionHidden": "",
                                "readonly": "true"
                            },
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "rows": "10",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field17",
                        "label": "",
                        "value": "<input id=\"novoagendamento\" type=\"button\" value=\"PEDIR AGENDAMENTO\">"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field12",
                        "label": "",
                        "permission_rules": {
                            "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                            "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                            "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                            "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                            "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                            "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                            "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {},
                            "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                            "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
                        },
                        "value": "<script>\n    $(window).load(function(){\n         var flag_validacao = '#variable.flag_validacao#';\n         \n        if(flag_validacao === '1' || flag_validacao.startsWith(\"#variable.flag_validacao\")){\n            $(\"form#processo :input\").change(function(){\n                $(\"input#flag_alteracoes\").attr(\"value\",\"SIM\");    \n            });\n        }\n    });\n    \n    $(document).ready(function(){\n        \n        //Esconder campos de contacto do cliente\n        $(\"input[id*=telefone_cliente]\").parent().hide();\n        $(\"input[id*=email_cliente]\").parent().hide();\n        \n        var nWfPl = \"#form.detalhe_processo.n_wf_pl[{form.processos.detalhe_processo}]#\";\n        var banco = \"#form.detalhe_processo.nome_banco[{form.processos.detalhe_processo}]#\";\n        var emailGestor = \"#form.banco.email_gestor[{form.processos.banco}]#\";\n        var outroEmailGestor = \"#form.banco.outro_email_gestor[{form.processos.banco}]#\";\n        var complexidade = \"#form.detalhe_processo.complex_processo[{form.processos.detalhe_processo}]#\";\n        var emailCliente = \"\";\n        var telefoneCliente = \"\";\n        var nomeCliente = \"\";\n        var idCliente = \"\";\n        var tipoDeProcesso = \"#form.detalhe_processo.tipo_processo[{form.processos.detalhe_processo}]#\";\n        var dataAgendamento = $(\"input[id*=data_agendamento]\").datepicker({ dateFormat: \"yy-mm-dd\", timeFormat:  \"hh:mm\" }).val();\n        var distrito = $(\"select[id*=distrito]\").val();\n        var concelho = $(\"select[id*=concelho]\").val();\n        var contactar = $(\"div[id*=contacto] input:checked\").val();\n        \n        \n        \n        switch(banco){\n            case \"MTG\":\n                emailGestor = \"#form.banco.email_gestor_mtg[{form.processos.banco}]#\";\n                outroEmailGestor = \"#form.banco.outro_email_gestor_mtg[{form.processos.banco}]#\";\n            \n            case \"BIC\":\n                emailGestor = \"#form.banco.email_gestor_bic[{form.processos.banco}]#\";\n                outroEmailGestor = \"#form.banco.outro_email_gestor_bic[{form.processos.banco}]#\";\n                \n            case \"BST\":\n                emailGestor = \"#form.banco.email_gestor_bst[{form.processos.banco}]#\";\n                outroEmailGestor = \"#form.banco.outro_email_gestor_bst[{form.processos.banco}]#\";\n            \n            case \"NVB\":\n                emailGestor = \"#form.banco.email_gestor_nvb[{form.processos.banco}]#\";\n                outroEmailGestor = \"#form.banco.outro_email_gestor_nvb[{form.processos.banco}]#\";\n        }\n        \n        if(emailGestor === \"\"){\n            emailGestor = outroEmailGestor;\n        }\n        \n        if(complexidade === \"COM\"){\n            complexidade= \"Complexo\";\n        }else{\n            complexidade=\"Normal\";\n        }\n        \n        \n        $.ajax({\n            type:\"GET\",\n                url: \"/jw/api/list/listIntervenientesPrincipais?c_id_processo=\" + \"#form.processos.id#\",\n                headers:{\n                    \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                    \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                    \"Accept\":\"application/json\",\n                    \"Content-Type\": \"application/json\"\n                },\n                success: function(data){\n                    if(data.total!=undefined && data.total > 0){\n                        idCliente = data.data[0].id;\n                        emailCliente = data.data[0].c_email;\n                        telefoneCliente = data.data[0].c_telefone;\n                        nomeCliente = data.data[0].c_nome;\n                    }\n   \n                    \n                    $(\"textarea[id*=observacoes_agendamento]\").val(\"Nome Cliente - \" + nomeCliente + \"\\n\" + \"Número Processo - \" + nWfPl + \"\\n\" + \"Data Agendamento - \" + dataAgendamento \n                    + \"\\n\" + \"Local - \" + \"\\n\" +\"    Distrito: \" + distrito + \"\\n\" + \"    Concelho: \" + concelho + \"\\n\" + \"Telefone - \" + telefoneCliente\n                    + \"\\n\" + \"Email - \" + emailCliente + \"\\n\" + \"Email Gestor - \" + emailGestor + \"\\n\" + \"Tipo de Processo - \" + tipoDeProcesso + \"\\n\" + \"Complexidade - \" + complexidade);\n                    \n                    /*\n                    console.log(\"Nome Cliente - \" + nomeCliente);\n                    console.log(\"Número Processo - \" + nWfPl);\n                    console.log(\"Data Agendamento - \" + dataAgendamento);\n                    console.log(\"Local - Distrito: \" + distrito + \" Concelho: \" + concelho);\n                    console.log(\"Telefone - \" + telefoneCliente);\n                    console.log(\"Email - \" + emailCliente);\n                    console.log(\"Email Gestor - \" + emailGestor);\n                    console.log(\"Tipo de Processo - \" + tipoDeProcesso);\n                    console.log(\"Complexidade - \" + complexidade);\n                    */   \n                 \n                 //Se for para contactar o cliente\n                    if(contactar === 'CLT'){\n                        if(emailCliente===''){\n                            $(\"input[id*=email_cliente]\").parent().show();                    \n                        }\n                        if(telefoneCliente === ''){\n                            $(\"input[id*=telefone_cliente]\").parent().show();\n                        }\n                    }\n                }\n        });\n        \n        \n        //Se a data de agendamento sofrer alterações atualiza os valores na textarea\n        $(\"input[id*=data_agendamento]\").on('change', function(){\n            dataAgendamento = $(\"input[id*=data_agendamento]\").datepicker({ dateFormat: \"yy-mm-dd\", timeFormat:  \"hh:mm\" }).val();\n             $(\"textarea[id*=observacoes_agendamento]\").val(\"Nome Cliente - \" + nomeCliente + \"\\n\" + \"Número Processo - \" + nWfPl + \"\\n\" + \"Data Agendamento - \" + dataAgendamento \n                    + \"\\n\" + \"Local - \" + \"\\n\" +\"    Distrito: \" + distrito + \"\\n\" + \"    Concelho: \" + concelho + \"\\n\" + \"Telefone - \" + telefoneCliente\n                    + \"\\n\" + \"Email - \" + emailCliente + \"\\n\" + \"Email Gestor - \" + emailGestor + \"\\n\" + \"Tipo de Processo - \" + tipoDeProcesso + \"\\n\" + \"Complexidade - \" + complexidade);\n        });\n        \n        //Se o distrito sofrer alterações atualiza os valores na textarea\n        $(\"select[id*=distrito]\").on('change', function(){\n            distrito = $(\"select[id*=distrito]\").val();\n            $(\"textarea[id*=observacoes_agendamento]\").val(\"Nome Cliente - \" + nomeCliente + \"\\n\" + \"Número Processo - \" + nWfPl + \"\\n\" + \"Data Agendamento - \" + dataAgendamento \n                    + \"\\n\" + \"Local - \" + \"\\n\" +\"    Distrito: \" + distrito + \"\\n\" + \"    Concelho: \" + concelho + \"\\n\" + \"Telefone - \" + telefoneCliente\n                    + \"\\n\" + \"Email - \" + emailCliente + \"\\n\" + \"Email Gestor - \" + emailGestor + \"\\n\" + \"Tipo de Processo - \" + tipoDeProcesso + \"\\n\" + \"Complexidade - \" + complexidade);\n            \n        });\n        \n        //Se concelho sofrer alterações atualiza os valores na textarea\n        $(\"select[id*=concelho]\").on('change', function(){\n            concelho = $(\"select[id*=concelho]\").val();\n             $(\"textarea[id*=observacoes_agendamento]\").val(\"Nome Cliente - \" + nomeCliente + \"\\n\" + \"Número Processo - \" + nWfPl + \"\\n\" + \"Data Agendamento - \" + dataAgendamento \n                    + \"\\n\" + \"Local - \" + \"\\n\" +\"    Distrito: \" + distrito + \"\\n\" + \"    Concelho: \" + concelho + \"\\n\" + \"Telefone - \" + telefoneCliente\n                    + \"\\n\" + \"Email - \" + emailCliente + \"\\n\" + \"Email Gestor - \" + emailGestor + \"\\n\" + \"Tipo de Processo - \" + tipoDeProcesso + \"\\n\" + \"Complexidade - \" + complexidade);\n        });\n        \n        //Se o contacto sofrer alterações verificar se of campos de contacto estão preencidos\n        $(\"div[id*=contacto] input\").on('change', function(){\n            contactar = $(\"div[id*=contacto] input:checked\").val();  \n            if(contactar === 'BLC'){\n                $(\"input[id*=telefone_cliente]\").parent().hide();\n                $(\"input[id*=email_cliente]\").parent().hide();\n                console.log(\"BALCÂO\");\n            }else if(contactar === 'CLT'){\n                        if(telefoneCliente == null || telefoneCliente === ''){\n                            $(\"input[id*=telefone_cliente]\").parent().show();    \n                        }\n                        \n                        if(emailCliente == null || emailCliente === ''){\n                            $(\"input[id*=email_cliente]\").parent().show();\n                        }\n            }else{\n                $(\"input[id*=telefone_cliente]\").parent().hide();\n                $(\"input[id*=email_cliente]\").parent().hide();\n                console.log(\"AMBOS\");\n            }\n            \n        });\n        \n            \n        $(\"input#novoagendamento\").click(function(){\n            \n            if(contactar === 'CLT'){\n                var validEmailCliente = validateEmail();\n                console.log(validEmailCliente);\n                var validTelefoneCliente = true;//validateTelefone();\n                console.log(validTelefoneCliente);\n                \n                if(validEmailCliente){\n                    \n                    //ATualizar campos\n                    //Pedir Agendamento\n                }else{\n                    \n                    \n                    \n                }\n            }\n        });\n     \n    });\n    \n    \n    function validateEmail(){\n        var email = $(\"input[id*=email_cliente]\").val();\n        var emailRegex = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/;\n        var result = false;\n        if(email !== ''){\n            result = emailRegex.test(email);\n            if(result==false){\n                $(\"input[id*=email_cliente]\").css(\"border\", \"1px solid red\");\n                $('#myErrorMsg').fadeIn('fast').delay(1000).fadeOut('fast');           \n                $.unblockUI();\n                \n            }\n        }else{\n            $(\"input[id*=email_cliente]\").css(\"border\", \"1px solid red\");\n            $(\"input[id*=email_cliente]\").attr('placeholder', \"CAMPO OBRIGATÓRIO\");\n        }\n         \n        return result;\n    }\n    \n    function validateTelefone(){\n        var telefone = $(\"input[id*=telefone_cliente]\").val();\n        var telefoneRegex = /^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s\\./0-9]*$/;\n        var result = false;\n        if(telefone !== ''){\n            result = telefoneRegex.test(telefone);    \n        }\n         \n        return result;\n    }\n    \n    \n    \n<\/script>"
                    }
                }
            ],
            "properties": {"width": "100%"}
        }],
        "properties": {
            "comment": "",
            "id": "informacao_geral",
            "join": "",
            "label": "Informação Geral",
            "loadBinder": {
                "className": "",
                "properties": {}
            },
            "permission": {
                "className": "",
                "properties": {}
            },
            "permissionReadonly": "",
            "permission_rules": {
                "0e7617d8-1161-e5f1-6cc4-902cedbaaa54": {},
                "570533e0-cbb7-f32b-9695-a8e9d2370a33": {},
                "581aec98-64de-cb6e-5a07-27c7d1e550ba": {},
                "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09": {},
                "5d138c56-1736-dff2-b7d8-c8667858776c": {},
                "7d10cf1b-4a43-744c-57ae-b2442baee17c": {},
                "8f7b8a9d-4999-7784-7a33-918d09fbdc0d": {},
                "9d853985-1ae4-3c97-4cca-9de6c3614741": {},
                "c1ad5abb-3437-3755-3fac-bbbe4c8ed572": {}
            },
            "readonly": "",
            "readonlyLabel": "",
            "regex": "",
            "reverse": "",
            "storeBinder": {
                "className": "",
                "properties": {}
            },
            "visibilityControl": "",
            "visibilityValue": ""
        }
    }],
    "properties": {
        "description": "",
        "id": "agendamento",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Agendamento",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "permission_rules": [
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_CNT_BIC_COM_CRH;PL_INT_CNT_BIC_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "570533e0-cbb7-f32b-9695-a8e9d2370a33",
                "permission_name": "Contratação BIC"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_CNT_ABN_COM_CRH;PL_INT_CNT_ABN_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "0e7617d8-1161-e5f1-6cc4-902cedbaaa54",
                "permission_name": "Contratação ABN"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_CNT_BCP_COM_CRH;PL_INT_CNT_BCP_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "9d853985-1ae4-3c97-4cca-9de6c3614741",
                "permission_name": "Contratação BCP"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_CNT_BST_COM_CRH;PL_INT_CNT_BST_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "581aec98-64de-cb6e-5a07-27c7d1e550ba",
                "permission_name": "Contratação BST"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_CNT_NVB_COM_CRH;PL_INT_CNT_NVB_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "7d10cf1b-4a43-744c-57ae-b2442baee17c",
                "permission_name": "Contratação NVB"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_CNT_MTG_COM_CRH;PL_INT_CNT_MTG_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "5b2fae9f-2c09-fec1-c2ae-b82fc5ab6d09",
                "permission_name": "Contratação MTG"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_FLT_GEN_COM_CRH;PL_INT_FLT_GEN_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "8f7b8a9d-4999-7784-7a33-918d09fbdc0d",
                "permission_name": "Filtro"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_PRD_GEN_COM_CRH;PL_INT_PRD_GEN_NOR_CRH;PL_INT_PRD_GEN_RPA_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "5d138c56-1736-dff2-b7d8-c8667858776c",
                "permission_name": "Produção"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_VAL_BCP_COM_CRH;PL_INT_VAL_BCP_NOR_CRH;PL_INT_VAL_BNI_COM_CRH;PL_INT_VAL_BNI_NOR_CRH;PL_INT_VAL_BST_COM_CRH;PL_INT_VAL_BST_NOR_CRH;PL_INT_VAL_GEN_COM_CRH;PL_INT_VAL_GEN_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "c1ad5abb-3437-3755-3fac-bbbe4c8ed572",
                "permission_name": "Validação"
            }
        ],
        "postProcessor": {
            "className": "",
            "properties": {}
        },
        "postProcessorRunOn": "create",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "agendamento"
    }
}