{
    "className": "org.joget.apps.form.model.Form",
    "elements": [
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "validar_alteracoes_agenda",
                            "useDefaultWhenEmpty": "",
                            "validator": {
                                "className": "org.joget.apps.form.lib.BeanShellValidator",
                                "properties": {
                                    "decoration": "",
                                    "script": "import java.util.Arrays;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.Form;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.commons.util.LogUtil;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport javax.sql.DataSource;\r\n\r\n \r\npublic boolean validate(Element element, FormData formData, String[] values) {\r\n    boolean result = true;\r\n    \r\n    String processId = \"#form.processos_procu.id#\";\r\n    Form form = FormUtil.findRootForm(element);\r\n    Element atos = FormUtil.findElement(\"atos\", form, formData);\r\n    String idAtos = FormUtil.getElementParameterName(atos);\r\n    \r\n    Connection con = null;\r\n    PreparedStatement stmt = null;\r\n    ResultSet rs = null;\r\n    try{\r\n        DataSource ds = (DataSource)AppUtil.getApplicationContext().getBean(\"setupDataSource\");\r\n        con = ds.getConnection();\r\n            \r\n        if(!con.isClosed()){\r\n        \r\n            String queryGetMaxAlteracoes = \"SELECT MAX(c_flag_alteracoes_agenda) as max FROM app_fd_atos WHERE c_id_processo = ? ;\";\r\n            stmt = con.prepareStatement(queryGetMaxAlteracoes);\r\n            stmt.setObject(1, processId);\r\n            rs = stmt.executeQuery();\r\n            \r\n            if(rs.next()){\r\n                String max = rs.getObject(\"max\");\r\n                if(max!=null && max.equals(\"1\")){\r\n                    result = false;  \r\n                    formData.addFormError(idAtos, \"Houve alterações nos Atos pela Agenda. O processo vai ter de ser atualizado.\");\r\n                }\r\n            }\r\n        }\r\n        \r\n    }catch(Exception e){\r\n            LogUtil.error(\"Olimpo- Validator Agendamento Alterações\", e, \"Error getting info from DB\");\r\n    }finally{\r\n        try{\r\n            if(rs != null){\r\n            rs.close();\r\n            }\r\n            if(stmt != null){\r\n                stmt.close();\r\n            }\r\n            if(con != null && !con.isClosed()) {\r\n                con.close();\r\n            }\r\n        }catch(Exception e){\r\n            LogUtil.error(\"Olimpo- Validator Agendamento Alterações\", e, \"Error closing DB connection\");\r\n        }\r\n        \r\n    }\r\n    \r\n \r\n    return result;\r\n}\r\n \r\n//call validate method with injected variable\r\nreturn validate(element, formData, values);\r\nreturn true;"
                                }
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "flag_agendado",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "useDefaultWhenEmpty": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "id_processo",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "useDefaultWhenEmpty": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "n_wf_agendamento",
                            "label": "Número Workflow Agendamento",
                            "maxlength": "",
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.Radio",
                        "properties": {
                            "controlField": "",
                            "id": "urgencia",
                            "label": "Urgência",
                            "options": [
                                {
                                    "grouping": "",
                                    "label": "Sim",
                                    "value": "SIM"
                                },
                                {
                                    "grouping": "",
                                    "label": "Não",
                                    "value": "NAO"
                                }
                            ],
                            "optionsBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.DatePicker",
                        "properties": {
                            "allowManual": "true",
                            "currentDateAs": "",
                            "dataFormat": "yyyy-MM-dd",
                            "datePickerType": "",
                            "endDateFieldId": "",
                            "format": "",
                            "id": "data_solicitada",
                            "label": "Data Solicitada",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "startDateFieldId": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": "",
                            "yearRange": "c-10:c+10"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.DatePicker",
                        "properties": {
                            "allowManual": "",
                            "datePickerType": "timeOnly",
                            "endDateFieldId": "",
                            "format24hr": "true",
                            "id": "hora_solicitada",
                            "label": "Hora Solicitada",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "startDateFieldId": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "local",
                            "label": "Local",
                            "maxlength": "",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "morada",
                            "label": "Morada",
                            "maxlength": "",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.Radio",
                        "properties": {
                            "controlField": "",
                            "id": "originais",
                            "label": "Tem Originais?",
                            "options": [
                                {
                                    "grouping": "",
                                    "label": "Sim",
                                    "value": "SIM"
                                },
                                {
                                    "grouping": "",
                                    "label": "Nao",
                                    "value": "NAO"
                                }
                            ],
                            "optionsBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "permission_rules": {
                                "0c699003-580e-7faf-a39c-f2e5303bd5b5": {},
                                "1804038d-e85d-3ea4-4ef3-4c4143e5145b": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2dd4cc96-cc40-f285-e376-ebda47490646": {},
                                "40b85e69-a77b-cdfa-05ef-6bd9811e4410": {},
                                "44639061-b6ba-a2ef-a47c-c5bab888544c": {},
                                "467e0936-e8fb-e23b-f48d-e5c28c5ab7ed": {},
                                "47d9dac4-bb53-53f7-2c45-a2b2e20e7f54": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "504595d7-fa4b-d219-d8a6-65d1a4da0728": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "710a05c8-c837-e0d0-670a-720473cb5a7c": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "787c67d4-d157-ca8e-655e-43717638627d": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "87e7b01c-e92b-e732-c50f-c2c7020e5482": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dccd1818-864d-54e3-09c2-6e246cfcf5fe": {},
                                "e94738b9-1966-5300-3072-703d03acb3df": {},
                                "ee177599-9c69-d878-10f8-9aebde208e06": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {},
                                "f8c01627-bf37-05aa-5732-90fe1b2327b3": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.DatePicker",
                        "properties": {
                            "allowManual": "",
                            "currentDateAs": "",
                            "dataFormat": "yyyy-MM-dd",
                            "datePickerType": "",
                            "endDateFieldId": "",
                            "format": "",
                            "id": "data_rececao_originais",
                            "label": "Data de Receção Originais",
                            "permission_rules": {
                                "002b1a8a-e876-ce11-bc14-95ea87c94ef1": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "0c699003-580e-7faf-a39c-f2e5303bd5b5": {},
                                "1804038d-e85d-3ea4-4ef3-4c4143e5145b": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2dd4cc96-cc40-f285-e376-ebda47490646": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "40b85e69-a77b-cdfa-05ef-6bd9811e4410": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "44639061-b6ba-a2ef-a47c-c5bab888544c": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "467e0936-e8fb-e23b-f48d-e5c28c5ab7ed": {},
                                "47d9dac4-bb53-53f7-2c45-a2b2e20e7f54": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "504595d7-fa4b-d219-d8a6-65d1a4da0728": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "710a05c8-c837-e0d0-670a-720473cb5a7c": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "787c67d4-d157-ca8e-655e-43717638627d": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "82da97c1-87da-f690-974b-7933ba332d50": {},
                                "87e7b01c-e92b-e732-c50f-c2c7020e5482": {},
                                "8acb7ec8-5146-02d5-bc86-1da3ddfde73b": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "ba822b1f-f4e9-0fe5-ac89-74d3207ce0cf": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dccd1818-864d-54e3-09c2-6e246cfcf5fe": {},
                                "e94738b9-1966-5300-3072-703d03acb3df": {},
                                "ee177599-9c69-d878-10f8-9aebde208e06": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "f8c01627-bf37-05aa-5732-90fe1b2327b3": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "startDateFieldId": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": "",
                            "yearRange": "c-10:c+10"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "local_envio_originais",
                            "label": "Local de Envio dos Originais",
                            "maxlength": "",
                            "permission_rules": {
                                "0c699003-580e-7faf-a39c-f2e5303bd5b5": {},
                                "1804038d-e85d-3ea4-4ef3-4c4143e5145b": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2dd4cc96-cc40-f285-e376-ebda47490646": {},
                                "40b85e69-a77b-cdfa-05ef-6bd9811e4410": {},
                                "44639061-b6ba-a2ef-a47c-c5bab888544c": {},
                                "467e0936-e8fb-e23b-f48d-e5c28c5ab7ed": {},
                                "47d9dac4-bb53-53f7-2c45-a2b2e20e7f54": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "504595d7-fa4b-d219-d8a6-65d1a4da0728": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "710a05c8-c837-e0d0-670a-720473cb5a7c": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "787c67d4-d157-ca8e-655e-43717638627d": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "87e7b01c-e92b-e732-c50f-c2c7020e5482": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dccd1818-864d-54e3-09c2-6e246cfcf5fe": {},
                                "e94738b9-1966-5300-3072-703d03acb3df": {},
                                "ee177599-9c69-d878-10f8-9aebde208e06": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {},
                                "f8c01627-bf37-05aa-5732-90fe1b2327b3": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "registoCTT",
                            "label": "Registo CTT",
                            "maxlength": "",
                            "permission_rules": {
                                "0c699003-580e-7faf-a39c-f2e5303bd5b5": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "1804038d-e85d-3ea4-4ef3-4c4143e5145b": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2dd4cc96-cc40-f285-e376-ebda47490646": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "40b85e69-a77b-cdfa-05ef-6bd9811e4410": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "44639061-b6ba-a2ef-a47c-c5bab888544c": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "467e0936-e8fb-e23b-f48d-e5c28c5ab7ed": {},
                                "47d9dac4-bb53-53f7-2c45-a2b2e20e7f54": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "504595d7-fa4b-d219-d8a6-65d1a4da0728": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "710a05c8-c837-e0d0-670a-720473cb5a7c": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "787c67d4-d157-ca8e-655e-43717638627d": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "87e7b01c-e92b-e732-c50f-c2c7020e5482": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "dccd1818-864d-54e3-09c2-6e246cfcf5fe": {},
                                "e94738b9-1966-5300-3072-703d03acb3df": {},
                                "ee177599-9c69-d878-10f8-9aebde208e06": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "f8c01627-bf37-05aa-5732-90fe1b2327b3": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "deposito",
                            "label": "Código de Depósito do Distrate",
                            "maxlength": "",
                            "permission_rules": {
                                "0c699003-580e-7faf-a39c-f2e5303bd5b5": {},
                                "1804038d-e85d-3ea4-4ef3-4c4143e5145b": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2dd4cc96-cc40-f285-e376-ebda47490646": {},
                                "40b85e69-a77b-cdfa-05ef-6bd9811e4410": {},
                                "44639061-b6ba-a2ef-a47c-c5bab888544c": {},
                                "467e0936-e8fb-e23b-f48d-e5c28c5ab7ed": {},
                                "47d9dac4-bb53-53f7-2c45-a2b2e20e7f54": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "504595d7-fa4b-d219-d8a6-65d1a4da0728": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "710a05c8-c837-e0d0-670a-720473cb5a7c": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "787c67d4-d157-ca8e-655e-43717638627d": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "87e7b01c-e92b-e732-c50f-c2c7020e5482": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dccd1818-864d-54e3-09c2-6e246cfcf5fe": {},
                                "e94738b9-1966-5300-3072-703d03acb3df": {},
                                "ee177599-9c69-d878-10f8-9aebde208e06": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {},
                                "f8c01627-bf37-05aa-5732-90fe1b2327b3": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "conta",
                            "label": "Conta",
                            "maxlength": "",
                            "permission_rules": {
                                "0c699003-580e-7faf-a39c-f2e5303bd5b5": {},
                                "1804038d-e85d-3ea4-4ef3-4c4143e5145b": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2dd4cc96-cc40-f285-e376-ebda47490646": {},
                                "40b85e69-a77b-cdfa-05ef-6bd9811e4410": {},
                                "44639061-b6ba-a2ef-a47c-c5bab888544c": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "710a05c8-c837-e0d0-670a-720473cb5a7c": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "787c67d4-d157-ca8e-655e-43717638627d": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "87e7b01c-e92b-e732-c50f-c2c7020e5482": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dccd1818-864d-54e3-09c2-6e246cfcf5fe": {},
                                "ee177599-9c69-d878-10f8-9aebde208e06": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {},
                                "f8c01627-bf37-05aa-5732-90fe1b2327b3": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "valores_liquidacao_receber",
                            "label": "Valor de Liquidação / a Receber",
                            "maxlength": "",
                            "permission_rules": {
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "numero_centro_custo_balcao",
                            "label": "Número Centro de Custo Balcão",
                            "maxlength": "",
                            "permission_rules": {
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                }
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "nome_centro_custo_balcao",
                            "label": "Nome Centro de Custo Balcão",
                            "maxlength": "",
                            "permission_rules": {
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                }
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextArea",
                        "properties": {
                            "cols": "20",
                            "id": "observacoes_agendamento",
                            "label": "Observações do Agendamento",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "rows": "5",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field7",
                            "label": "",
                            "permission_rules": {
                                "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                                "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "value": "<script>\nvar flagDesmarcado, local, morada, nagenda, dataSolicitada, horaSolicitada, nWfAgenda;\n    $(document).ready(function(){\n        \n        var idAtos = FormUtil.getValues(\"atos.id\");\n        var mode = \"#requestParam._mode#\";\n        //Caso o seja modo de consulta remover o botão de \"Pedir Agendamento\"\n        if(mode!=='assignment'){\n            $(\"input#agendar\").parent().hide();\n             $(\"div[id*=mensagemAgendamento]\").hide();\n        }\n        \n        \n        nagenda = \"#form.detalhe_proce_procu.n_agenda[{form.processos_procu.detalhe_processo}]#\";\n        //Caso o NWF Agendamento esteja vazio é assumido o valor do NWF PL\n        if($(\"input[id*=n_wf_agendamento]\").val() === ''){\n            $(\"input[id*=n_wf_agendamento]\").val(nagenda);\n        }\n        \n        \n        if($(\"input[id*=flag_agendado]\").val() === '1'){\n            $(\"div[id*=agendamentoProcuradoria_agendamento]\").hide();\n        }\n        \n        local = $(\"input[id*=local]\").val();\n        $(\"input[id*=local]\").change(function(){\n            local = $(\"input[id*=local]\").val();\n            atualizarObservacoes();\n        });\n        \n        morada = $(\"input[id*=morada]\").val();\n        $(\"input[id*=morada]\").change(function(){\n            morada= $(\"input[id*=morada]\").val();\n            atualizarObservacoes();\n        });\n        \n        dataSolicitada=$(\"input[id*=data_solicitada]\").val();\n        $(\"input[id*=data_solicitada]\").change(function(){\n            dataSolicitada=$(\"input[id*=data_solicitada]\").val();\n            atualizarObservacoes();\n        });\n        \n        horaSolicitada=$(\"input[id*=hora_solicitada]\").val();\n        $(\"input[id*=hora_solicitada]\").change(function(){\n            horaSolicitada=$(\"input[id*=hora_solicitada]\").val();\n            atualizarObservacoes();\n        });\n        \n        nWfAgenda = $(\"input[id*=n_wf_agendamento]\").val();\n        $(\"input[id*=n_wf_agendamento]\").change(function(){\n            nWfAgenda = $(\"input[id*=n_wf_agendamento]\").val();\n        });\n        \n        atualizarObservacoes();\n        \n\n        \n        $(\"input#agendar\").click(function(){\n            $(this).prop(\"disabled\", true);\n            var urlAto =\"/jw/api/form/atosGeral/\" + idAtos[idAtos.length-1];\n            if(idAtos.length>0){\n                $.ajax({\n                    type:\"GET\",\n                    url: urlAto,\n                    headers:{\n                        \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                        \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                        \"Accept\":\"application/json\",\n                        \"Content-Type\": \"application/json\"\n                    },\n                    success: function(response){\n                        var flagAlteracoes=parseInt(response.flag_alteracoes_agenda);\n                        if(flagAlteracoes===1){\n                            showReloadModal();\n                        }else{\n                            atualizarFormAgendamento();\n                        }\n                    }\n                });\n            }else{\n                atualizarFormAgendamento();\n            }\n        });\n        \n        $(\"form#procuradoria :input\").change(function(){\n            $(\"input#agendar\").prop(\"disabled\", false);\n            \n        });\n        \n    });\n    \nfunction atualizarObservacoes(){\n    var observacoesVal = $(\"textarea[id*=observacoes_agendamento]\").val(\"Local: \" + local+ \"\\nMorada: \" + morada + \"\\nData solicitada: \" + dataSolicitada + \" \" + horaSolicitada);    \n    \n}\n    \nfunction atualizarFormAgendamento(){\n\n    if(validadeDataEHoraSolicitada() && validateNWFAgendamento()){\n        var urgencia = $(\"div[id*=urgencia] input:checked\").val();\n        dataSolicitada=$(\"input[id*=data_solicitada]\").val();\n        horaSolicitada=$(\"input[id*=hora_solicitada]\").val();\n        var observacoes=$(\"textarea[id*=observacoes_agendamento]\").val();\n        var local = $(\"input[id*=local]\").val();\n        var morada = $(\"input[id*=morada]\").val();\n        var dataRececaoOriginais = $(\"input[id*=data_rececao_originais]\").val();\n        var originais = $(\"input[id*=originais]:checked\").val();\n        var localEnvioOriginais = $(\"input[id*=local_envio_originais]\").val();\n        var registoCTT = $(\"input[id*=registoCTT]\").val();\n        var deposito = $(\"input[id*=deposito]\").val();\n        var conta = $(\"input[id*=conta]\").val();\n        var valoresLiquidacaoReceber = $(\"input[id*=valores_liquidacao_receber]\").val();\n        var numeroCentroCustoBalcao = $(\"input[id*=numero_centro_custo_balcao]\").val();\n        var nomeCentroCustoBalcao = $(\"input[id*=nome_centro_custo_balcao]\").val();\n        \n        //Criação do Ato\n        $.ajax({\n            type:\"POST\",\n            url: \"/jw/api/form/atosGeral\",\n            headers:{\n                \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                \"Accept\":\"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            data: JSON.stringify({\n                            \"id_processo\": \"#form.processos_procu.id#\",\n                            \"id_agendamento\": \"#form.processos_procu.agendamento#\",\n                            \"urgencia\": 'SIM',\n                            \"data_solicitada\":dataSolicitada,\n                            \"hora_solicitada\":horaSolicitada,\n                            \"local\": local,\n                            \"morada\": morada,\n                            \"observacoes_agendamento\": observacoes,\n                            \"data_rececao_originais\": dataRececaoOriginais,\n                            \"originais\": originais,\n                            \"local_envio_originais\": localEnvioOriginais,\n                            \"registoCTT\": registoCTT,\n                            \"deposito\": deposito,\n                            \"conta\": conta,\n                            \"valores_liquidacao_receber\": valoresLiquidacaoReceber,\n                            \"numero_centro_custo_balcao\": numeroCentroCustoBalcao,\n                            \"nome_centro_custo_balcao\": nomeCentroCustoBalcao,\n                            \"status\": \"AGN\"\n                        }),\n            success: function(response){\n                console.log(id);\n                var id = response.id;\n\n                pedirAgendamento(id);\n            }\n        });\n    }   \n}\n    \n    \n    $(window).load(function(){\n        \n        $(\"a.grid-action-edit\").not(\":last\").click(function(){\n            $('iframe[id*=atos]').on(\"load\", function(){\n                $('iframe[id*=atos]').contents().find(\"body form#atosAgendamento select\").attr(\"disabled\", true);\n                $('iframe[id*=atos]').contents().find(\"form\").on('submit', function(){\n                    $('iframe[id*=atos]').contents().find(\"body form#atosAgendamento select\").attr(\"disabled\", false);\n                });\n            });\n        });\n        \n        $(\"a.grid-action-edit\").click(function(){\n            $('iframe[id*=atos]').on(\"load\", function(){\n                if($('iframe[id*=atos]').contents().find(\"select[id*=status]\").val() ){\n                    if( $('iframe[id*=atos]').contents().find(\"select[id*=status]\").val().includes('DES')){\n                        $('iframe[id*=atos]').contents().find(\"select[id*=motivo_desmarcacao]\").parent().show();\n                    }else{\n                        $('iframe[id*=atos]').contents().find(\"select[id*=motivo_desmarcacao]\").val(\"\");    \n                        $('iframe[id*=atos]').contents().find(\"select[id*=motivo_desmarcacao]\").parent().hide();\n                    }\n                }\n            });\n        });\n    });\n    \n    $(document).change(function(){\n        var status = FormUtil.getValues(\"atos.status\");\n        var flagAGN = false;\n        flagDesmarcado = false;\n        \n        \n        if(status.length>0){\n            //Se existir atos Desmarcados\n            if(status[status.length-1].indexOf('DES') !== -1 || status[status.length-1].indexOf('NOUT') !== -1){\n                flagDesmarcado = true;\n            }\n        }\n        \n            //Caso não existam atos desmarcados ou não haja nenhum pedido de agendamento\n            if(!flagDesmarcado || $(\"input[id*=flag_agendado]\").val() === '0'){\n                $(\"div[id*=mensagemAgendamento]\").hide();\n            }else{\n                $(\"div[id*=mensagemAgendamento]\").show();\n            }\n \n        \n    });\n    \n\n    \n    \nfunction updateEstadoAgendamento(){\n            var dataRececaoOriginais = $(\"input[id*=data_rececao_originais]\").val();\n            var originais = $(\"input[id*=originais]:checked\").val();\n            var localEnvioOriginais = $(\"input[id*=local_envio_originais]\").val();\n            var registoCTT = $(\"input[id*=registoCTT]\").val();\n            var deposito = $(\"input[id*=deposito]\").val();\n            var conta = $(\"input[id*=conta]\").val();\n            var valoresLiquidacaoReceber = $(\"input[id*=valores_liquidacao_receber]\").val();\n            var numeroCentroCustoBalcao = $(\"input[id*=numero_centro_custo_balcao]\").val();\n            var nomeCentroCustoBalcao = $(\"input[id*=nome_centro_custo_balcao]\").val();\n        $.ajax({\n                type:\"POST\",\n                url: \"/jw/api/form/agendamentoProcuradoria/saveOrUpdate\",\n                headers:{\n                    \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                    \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                    \"accept\":\"application/json\",\n                    \"Content-Type\": \"application/json\"\n                },\n                data: JSON.stringify({\n                                \"id\": \"#form.processos_procu.agendamento#\",\n                                \"n_wf_agendamento\": nWfAgenda,\n                                \"flag_agendado\": \"1\",\n                                \"local\": local,\n                                \"morada\": morada,\n                                \"originais\": originais,\n                                \"data_rececao_originais\": dataRececaoOriginais, \n                                \"local_envio_originais\": localEnvioOriginais,\n                                \"registoCTT\": registoCTT,\n                                \"deposito\": deposito,\n                                \"conta\": conta,\n                                \"valores_liquidacao_receber\": valoresLiquidacaoReceber,\n                                \"numero_centro_custo_balcao\": numeroCentroCustoBalcao,\n                                \"nome_centro_custo_balcao\": nomeCentroCustoBalcao\n\n                            }),\n                success: function(data){\n                    //location.reload();\n                    \n                }\n            });\n    }\n    \nfunction pedirAgendamento(idRegisto){\n        //Banco\n        var banco = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\n        var bancoMediaView = \"\";\n        switch(banco){\n            case \"BCP\":\n                bancoMediaView = \"BCP\";\n                break;\n            case \"BNI\":\n                bancoMediaView = \"BNI\";\n                break;\n            case \"BIC\":\n                bancoMediaView = \"BIC\";\n                break;\n            case \"HPG\":\n                bancoMediaView = \"HIPO\";\n                break;\n            case \"MTG\":\n                bancoMediaView = \"MTP\";\n                break;\n            case \"NOR\":\n                bancoMediaView = \"NORF\";\n                break;\n            case \"WHS\":\n                bancoMediaView = \"WHITS\";\n                break;\n            default:\n                bancoMediaView = \"\";  //Falta sem banco\n                break;\n        }\n        \n        //Data e Hora Solicitada\n        var dataSolicitada = $(\"input[id*= data_solicitada]\").val();\n        var horaSolicitada = $(\"input[id*=hora_solicitada]\").val() + \":00\";\n        dataSolicitada = dataSolicitada.substring(6,10) + \"-\" + dataSolicitada.substring(3,5) + \"-\" + dataSolicitada.substring(0,2);\n        var dataSolicitada = dataSolicitada +\"T\" +horaSolicitada;\n        \n\n        //Observações\n        var observacoes =  $(\"textarea[id*=observacoes_agendamento]\").val();\n        \n        \n        \n        //Pedir Agendamento\n        var username = \"#envVariable.apiMediaViewUsername#\";\n        var password = \"#envVariable.apiMediaViewPassword#\";\n        \n        var xmlhttp = new XMLHttpRequest();\n        //xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded; charset=ISO-8859-1');\n        \n        xmlhttp.open('POST', 'https://www.plataformalegal.pt/qualdesign/rpts/workflow.asmx?wsdl', true);\n        xmlhttp.setRequestHeader('Content-Type', 'text/xml; charset=UTF-8');\n        xmlhttp.onreadystatechange = function () {\n            if (xmlhttp.readyState == 4) {\n                if (xmlhttp.status >= 200 && xmlhttp.status <= 299) {\n                    var xmlResponse = $.parseXML(xmlhttp.responseText);\n                    var result = $(xmlResponse).find(\"EnviarProcessoResult\").text();\n                                        \n                    console.log(xmlResponse);\n                    console.log(result);\n                    if(result === '-1'){\n                        $(\"input[id*=n_wf_agendamento]\").css(\"border\", \"1px solid red\");\n                        $(\"input[id*=n_wf_agendamento]\").parent().find(\"label\").append('<span class=\"form-error-message\">Número Workflow não definido<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-2'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">O processo não existe na Agenda<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-3'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Banco mal definido<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                        \n                    }else if(result === '-4'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Tipo de Processo não definido<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-5'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Combinação distrito e concelho que está errada<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-6'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Não existe banco relacionado com o distrito/concelho<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-7'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Local mal definido<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-8'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Sem proponentes ou seu conteúdo<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-9'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Sem Data Indicativa definida<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else if(result === '-99'){\n                        $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Ocorreu um erro no pedido de agendamento<\/span>');\n                        $(window).scrollTop(0);\n                        apagarAto(idRegisto);\n                    }else{\n                        updateEstadoAgendamento();\n                    }\n\n                }else if(xmlhttp.status >= 400 && xmlhttp.status <= 499){\n                     $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Ocorreu um erro ao fazer o pedido de agendamento<\/span>');\n                    $(window).scrollTop(0);\n                    apagarAto(idRegisto);\n\n                }}else if(xmlhttp.status >= 500 && xmlhttp.status <= 599){\n                     $(\"form#procuradoria div[class=form-column] input#servico\").after('<span class=\"form-error-message\" style=\"font-size: 20px;font-weight: bold;\">Ocorreu um erro ao fazer o pedido de agendamento<\/span>');\n                    $(window).scrollTop(0);\n                    apagarAto(idRegisto);\n\n                }\n            }\n        }\n\n        \n        var sr= `<?xml version=\"1.0\" encoding=\"utf-8\"?>\n                <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n                  <soap:Header>\n                    <Header xmlns=\"http://tempuri.org/\">\n                      <Username>`+username+`<\/Username>\n                      <Password>`+password+`<\/Password>\n                    <\/Header>\n                  <\/soap:Header>\n                  <soap:Body>\n                    <EnviarProcesso xmlns=\"http://tempuri.org/\">\n                      <processo>\n                        dRegisto>`+idRegisto+`<\/IdRegisto>\n                        <NWF>`+nWfAgenda+`<\/NWF>\n                        <Banco>`+bancoMediaView+`<\/Banco>\n                        <DataIndicativa>`+dataSolicitada+`<\/DataIndicativa>\n                        <Observacoes>`+observacoes+`<\/Observacoes>\n                      <\/processo>\n                    <\/EnviarProcesso>\n                  <\/soap:Body>\n                <\/soap:Envelope>`;\n        \n        console.log(sr);\n        xmlhttp.send(sr);\n}\n\nfunction validadeDataEHoraSolicitada(){\n    \n    var data = $(\"input[id*=data_solicitada]\").val();\n    var hora = $(\"input[id*=hora_solicitada]\").val();\n    var result = true;\n    if(data === '' ){\n        result=false;\n        $(\"input[id*=data_solicitada]\").css(\"border\", \"1px solid red\");\n        $(\"input[id*=data_solicitada]\").attr('placeholder', \"CAMPO OBRIGATÓRIO\");\n    }else{\n        $(\"input[id*=data_solicitada]\").css(\"border\", \"none\");\n        $(\"input[id*=data_solicitada]\").css(\"border-bottom\", \"1px solid #555\");\n        $(\"input[id*=data_solicitada]\").attr('placeholder', \"\");\n    }\n    if(hora === ''){\n        result=false;\n        $(\"input[id*=hora_solicitada]\").css(\"border\", \"1px solid red\");\n        $(\"input[id*=hora_solicitada]\").attr('placeholder', \"CAMPO OBRIGATÓRIO\");\n    }else{\n        $(\"input[id*=hora_solicitada]\").css(\"border\", \"none\");\n        $(\"input[id*=hora_solicitada]\").css(\"border-bottom\", \"1px solid #555\");\n        $(\"input[id*=hora_solicitada]\").attr('placeholder', \"\");\n    }\n    return result;\n}\n\nfunction validateNWFAgendamento(){\n    var result = true;\n    var nWfAgendamento =  $(\"input[id*=n_wf_agendamento]\").val();\n    if(nWfAgendamento === ''){\n        result = false;\n        $(\"input[id*=n_wf_agendamento]\").css(\"border\", \"1px solid red\");\n        $(\"input[id*=n_wf_agendamento]\").parent().find(\"label\").append('<span class=\"form-error-message\">Número Workflow não definido<\/span>');\n    }\n    \n    return result;\n}\n \nfunction apagarAto(idAto){\n     $.ajax({\n            type:\"DELETE\",\n            url: \"/jw/api/form/atosGeral/\" + idAto,\n            headers:{\n                \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                \"Accept\":\"application/json\",\n                \"Content-Type\": \"application/json\"\n            },\n            success: function(response){\n                \n            var id = response.code;\n            //console.log(id);\n\n            }\n        });\n\n}\n    \n<\/script>\n<input id=\"agendar\" type=\"button\" value=\"PEDIR AGENDAMENTO\">"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field15",
                            "label": "",
                            "permission_rules": {
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "value": "<script>\n    $(document).ready(function(){\n        \n        visibilidadeBCP();\n        formatValorLiquidacaoReceber();\n        $(\"input[id*=valores_liquidacao_receber]\").change(function(){\n           formatValorLiquidacaoReceber();\n        });\n        \n        \n        \n    });\n    \n    function visibilidadeBCP(){\n        var tipoProcesso = \"#form.detalhe_proce_procu.tipo_processo[{form.processos_procu.detalhe_processo}]#\";\n        var banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\n\n        if(banco_fundo === 'BCP'){\n            if (tipoProcesso === 'DIST' || tipoProcesso === 'MUT' || tipoProcesso === 'LEAS'){\n                $(\"div[id*=originais]\").parent().hide();\n            } \n            \n            if(tipoProcesso === 'LEAS'){\n                $(\"input[id*=local_envio_originais]\").parent().hide();\n            }\n            \n            if(tipoProcesso === 'MUT' || tipoProcesso === 'LEAS' || tipoProcesso === 'ISV' || tipoProcesso === 'CVJ' || tipoProcesso === 'DAC'){\n                $(\"input[id*=deposito]\").parent().hide();\n            }\n            \n            if(tipoProcesso === 'MUT' || tipoProcesso === 'ISV' || tipoProcesso === 'CVJ'){\n                $(\"input[id*=conta]\").parent().hide();\n            }\n            \n            if(tipoProcesso === 'ISV' || tipoProcesso === 'CVJ' || tipoProcesso === 'DAC'){\n                $(\"input[id*=numero_centro_custo_balcao]\").parent().hide();\n                $(\"input[id*=nome_centro_custo_balcao]\").parent().hide();\n            }\n        }\n    }\n    \n    function formatValorLiquidacaoReceber(){\n         //Formatar valor de campos em euros \n        var number =  $(\"input[id*=valores_liquidacao_receber]\").val();\n        if(number && number !== \"\"){\n            number = number.replaceAll('NaN', \"0\");\n            number = number.replaceAll('.', \"\");\n            number = number.replaceAll('\u20ac', \"\");\n            number = number.replaceAll('Eur', \"\");\n            number = number.replaceAll('EUR', \"\");\n            number = number.replaceAll(',', '.');\n            \n            let num = new Intl.NumberFormat('pt-PT', { style: 'currency', currency: 'EUR' }).format(number);\n        \n            num = num.replace(/\\s/g, '.');\n            num = num.replaceAll('.\u20ac', ' EUR');\n            \n            $(\"input[id*=valores_liquidacao_receber]\").val(num);\n        }        \n\n    }\n    \n<\/script>\n"
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "agendamento_1",
                "join": "",
                "label": "Pedido de Agendamento",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionReadonly": "",
                "permission_rules": {
                    "03c775dc-a743-e094-4e35-cf487b91cef2": {},
                    "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                    "2f7e0d1d-ee44-6d46-f4bc-434ed5e08f53": {},
                    "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                    "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                    "5173a640-6d7b-ff47-1db9-349049a3ee8f": {},
                    "61eed640-2e15-cba4-8522-d7b5ae130f31": {},
                    "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                    "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                    "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                    "7e7faade-f35a-329d-a7a9-b6b63b1bc5b4": {},
                    "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                    "d4230f5d-0b67-d8a3-8845-6d41ad2f225b": {},
                    "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                    "dd84b73a-a59f-28e2-68ab-489586ddeac1": {},
                    "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field8",
                            "label": "",
                            "permission_rules": {
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "value": "<div>\n    \n<\/div>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field8",
                            "label": "",
                            "permission_rules": {
                                "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                                "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                                "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                                "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                                "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                                "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                                "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                                "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                                "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                            },
                            "value": "<script>\n\n$(document).ready(function(){\n    var idAtos = FormUtil.getValues(\"atos.id\");\n    $(\"input#novoagendamento\").click(function(){\n       // var flagAlteracoes = 0;\n       var urlAto =\"/jw/api/form/atosGeral/\" + idAtos[idAtos.length-1];\n        if(idAtos.length>0){\n            $.ajax({\n                type:\"GET\",\n                url: urlAto,\n                headers:{\n                    \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                    \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                    \"Accept\":\"application/json\",\n                    \"Content-Type\": \"application/json\"\n                },\n                success: function(response){\n                    var flagAlteracoes=parseInt(response.flag_alteracoes_agenda);\n                    if(flagAlteracoes===1){\n                        showReloadModal();\n                    }else{\n                        resetEstadoAgendamento(); \n                    }\n                }\n            });\n        }else{\n            resetEstadoAgendamento(); \n        }\n    });\n    \n    if($(\"div.form-errors\").length === 1){\n       showReloadModal();\n    }\n    \n});\n\n\n\n//Esconder botão Guardar e Concluir/ dar reset às flags de alterações dos atos\n$(window).load(function(){\n    var idAtos = FormUtil.getValues(\"atos.id\");\n    if(idAtos.length>0){\n        for(i=0; i<idAtos.length; i++){\n            if($(\"div.form-errors\").length !== 1){\n                resetFlagAlteracoes(idAtos[i]);\n            }\n        }\n    }\n    \n    $(\"input#saveAsDraft\").parent().parent().hide();\n    $(\"input#assignmentComplete\").parent().parent().hide();\n});\n\nfunction resetEstadoAgendamento(){\n           $.ajax({\n                type:\"POST\",\n                url: \"/jw/api/form/agendamentoProcuradoria/saveOrUpdate\",\n                headers:{\n                    \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n                    \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n                    \"accept\":\"application/json\",\n                    \"Content-Type\": \"application/json\"\n                },\n                data: JSON.stringify({\n                                \"id\": \"#form.processos_procu.agendamento#\",\n                                \"flag_agendado\": \"0\"\n                            }),\n                success: function(data){\n                    var idAtos = FormUtil.getValues(\"atos.id\");\n                    if(idAtos.length>0){\n                        var motivoAto = FormUtil.getValues(\"atos.motivo_ato\");\n                        var status = FormUtil.getValues(\"atos.status\");\n                        var dataEnvioOriginais = FormUtil.getValues(\"atos.data_envio_originais\");\n                        var dataComunicacaoCliente = FormUtil.getValues(\"atos.data_comunicacao_cliente\");\n                        var valorDespesas = FormUtil.getValues(\"atos.valor_despesas\");\n                        var despesasAsseguradasPl = FormUtil.getValues(\"atos.despesas_asseguradas_pl\");\n                        var observacoes = FormUtil.getValues(\"atos.observacoes\");\n                        var nomeCentroCustoBalcao = FormUtil.getValues(\"atos.nome_centro_custo_balcao\");\n                        var numeroCentroCustoBalcao = FormUtil.getValues(\"atos.numero_centro_custo_balcao\");\n                        var valoresLiquidacaoReceber = FormUtil.getValues(\"atos.valores_liquidacao_receber\");\n                        var conta = FormUtil.getValues(\"atos.conta\");\n                        var deposito = FormUtil.getValues(\"atos.deposito\");\n                        var registoCTT = FormUtil.getValues(\"atos.registoCTT\");\n                        var localEnvioOriginais = FormUtil.getValues(\"atos.local_envio_originais\");\n                        var dataRececaoOriginais = FormUtil.getValues(\"atos.data_rececao_originais\");\n                        var originais = FormUtil.getValues(\"atos.originais\");\n   \n                        for(i=0; i<idAtos.length; i++){\n                            updateAto(idAtos[i],motivoAto[i], status[i], dataEnvioOriginais[i], dataComunicacaoCliente[i], valorDespesas[i], despesasAsseguradasPl[i], observacoes[i], nomeCentroCustoBalcao[i], numeroCentroCustoBalcao[i], valoresLiquidacaoReceber[i], conta[i], deposito[i], registoCTT[i], localEnvioOriginais[i], dataRececaoOriginais[i], originais[i]);\n                        }\n\n                    }\n                    location.reload();\n                }\n            });\n}\n\nfunction updateAto(id, motivoAto, status, dataEnvioOriginais, dataComunicacaoCliente, valorDespesas, despesasAsseguradasPl, observacoes, nomeCentroCustoBalcao, numeroCentroCustoBalcao, valoresLiquidacaoReceber, conta, deposito, registoCTT, localEnvioOriginais, dataRececaoOriginais, originais){\n    \n    $.ajax({\n        type:\"POST\",\n        url: \"/jw/api/form/atosGeral/saveOrUpdate\",\n        headers:{\n            \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n            \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n            \"Accept\":\"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        data: JSON.stringify({\n                        \"id\": id,\n                        \"status\": status,\n                        \"motivo_ato\": motivoAto,\n                        \"data_envio_originais\": dataEnvioOriginais,\n                        \"data_comunicacao_cliente\": dataComunicacaoCliente,\n                        \"valor_despesas\": valorDespesas,\n                        \"despesas_asseguradas_pl\": despesasAsseguradasPl,\n                        \"observacoes\": observacoes,\n                        \"nome_centro_custo_balcao\": nomeCentroCustoBalcao,\n                        \"numero_centro_custo_balcao\": numeroCentroCustoBalcao,\n                        \"valores_liquidacao_receber\": valoresLiquidacaoReceber,\n                        \"conta\": conta,\n                        \"deposito\": deposito,\n                        \"registoCTT\": registoCTT,\n                        \"local_envio_originais\": localEnvioOriginais,\n                        \"data_rececao_originais\": dataRececaoOriginais,\n                        \"originais\": originais\n                    }),\n        success: function(response){\n            \n        }\n    });\n}\n    \nfunction resetFlagAlteracoes(id){\n    $.ajax({\n        type:\"POST\",\n        url: \"/jw/api/form/atosGeral/saveOrUpdate\",\n        headers:{\n            \"api_id\": \"#envVariable.apiIdComunicacaoMediaView#\",\n            \"api_key\": \"#envVariable.apiKeyComunicacaoMediaView#\",\n            \"Accept\":\"application/json\",\n            \"Content-Type\": \"application/json\"\n        },\n        data: JSON.stringify({\n            \"id\": id,\n            \"flag_alteracoes_agenda\": \"0\"\n        }),\n        success: function(response){\n            //console.log(response);\n        }\n    });\n}\n\n\n\nfunction showReloadModal(){\n    $(\"#filaTrabalho\").append('<table name=\"modalVerificarAlteracoes\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"boxy-wrapper fixed\" style=\"z-index: 1339; visibility: visible; left: 556.5px; top: 66.012px; opacity: 1;\"><tbody><tr><td class=\"top-left\"><\/td><td class=\"top\"><\/td><td class=\"top-right\"><\/td><\/tr><tr><td class=\"left\"><\/td><td class=\"boxy-inner\"><div class=\"title-bar\"><h2>&nbsp;<\/h2><a href=\"#\" class=\"close\"><i class=\"fa fas fa-times\"><\/i><\/a><\/div><div style=\"width: 650px;height: 450px;\"><span class=\"material-symbols-rounded icone_alerta2\">warning<\/span><div class=\"textValidation\" style=\"width: inherit;height: 450px;text-align: center;vertical-align: middle;line-height: 20px;padding: 180px 0px 0px 0px;font-family: \"Ubuntu\", sans-serif !important;font-size: 18px;\">Houveram alterações aos Atos pela Agenda. É necessário atualizar a página.<\/div><div style=\"width: 100%;height: 100px;text-align: center;vertical-align: middle;line-height: 20px;bottom: 0;position: absolute;\"><i class=\"waves-button-input waves-input-wrapper waves-effect btn waves-button waves-float\" style=\"color:rgb(33, 33, 33);background:rgba(0, 0, 0, 0);\"><input id=\"reloadPage\" name=\"reloadPage\" class=\"waves-button-input\" type=\"submit\" value=\"Atualizar página\" style=\"background-color:rgba(0,0,0,0);\"><\/i><\/div><\/div><\/td><td class=\"right\"><\/td><\/tr><tr><td class=\"bottom-left\"><\/td><td class=\"bottom\"><\/td><td class=\"bottom-right\"><\/td><\/tr><\/tbody><\/table>');\n    $(\"#filaTrabalho\").append('<div name=\"blackoutEcra\" class=\"boxy-modal-blackout\" style=\"z-index: 1338; opacity: 0.7; width: 100%; height: 100%; position:fixed; top:0px; left:0px;\"><\/div>');\n    \n    $(\"#reloadPage\").on('click', function() {\n        window.location = \"#request.scheme#://#request.serverName#:#request.serverPort##request.contextPath#/web/userview/workflowPL/UV_PL_Geral/_/filaTrabalho?activityId=#requestParam.activityId#&_mode=assignment\";\n    });\n}\n    \n\n    \n<\/script>\n<input id=\"novoagendamento\" type=\"button\" value=\"PEDIR NOVO AGENDAMENTO\">"
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "mensagemAgendamento",
                "join": "",
                "label": "Agendamento",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionReadonly": "",
                "permission_rules": {
                    "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                    "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                    "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                    "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                    "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                    "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                    "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                    "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                    "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [{
                    "className": "org.joget.plugin.enterprise.FormGrid",
                    "properties": {
                        "abortRelatedRunningProcesses": "",
                        "deleteFiles": "",
                        "deleteGridData": "",
                        "deleteMessage": "Delete row?",
                        "deleteSubformData": "",
                        "disabledAdd": "true",
                        "disabledDelete": "true",
                        "enableSorting": "",
                        "errorMessage": "Invalid number of rows",
                        "formDefId": "atosAgendamento",
                        "height": "85%",
                        "id": "atos",
                        "label": "Atos",
                        "loadBinder": {
                            "className": "org.joget.plugin.enterprise.MultirowFormBinder",
                            "properties": {
                                "foreignKey": "id_agendamento",
                                "formDefId": "atosAgendamento"
                            }
                        },
                        "options": [
                            {
                                "format": "opcoesDisplayGrid",
                                "formatType": "options",
                                "label": "Status",
                                "value": "status",
                                "width": ""
                            },
                            {
                                "format": "",
                                "formatType": "text",
                                "label": "Data Outorga",
                                "value": "dataOutorga",
                                "width": ""
                            },
                            {
                                "format": "",
                                "formatType": "text",
                                "label": "Hora Outorga",
                                "value": "horaOutorga",
                                "width": ""
                            },
                            {
                                "format": "",
                                "formatType": "text",
                                "label": "Procurador",
                                "value": "procurador",
                                "width": ""
                            }
                        ],
                        "pageSize": "100",
                        "permissionHidden": "",
                        "permission_rules": {
                            "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                            "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                            "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                            "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                            "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                            "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                            "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                            "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                            "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "showRowNumber": "",
                        "storeBinder": {
                            "className": "org.joget.plugin.enterprise.MultirowFormBinder",
                            "properties": {
                                "foreignKey": "id_agendamento",
                                "formDefId": "atosAgendamento"
                            }
                        },
                        "submit-label-normal": "",
                        "submit-label-readonly": "",
                        "uniqueKey": "",
                        "validateMaxRow": "",
                        "validateMinRow": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "width": "85%"
                    }
                }],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "section2",
                "join": "",
                "label": "Atos",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionReadonly": "",
                "permission_rules": {
                    "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9": {},
                    "4ca43afb-7ca5-9595-7d5e-480f9e1269aa": {},
                    "4dd344b6-5ff8-6608-a338-63d5c40ffc38": {},
                    "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1": {},
                    "73d59c6e-5d43-9985-020a-1564a2bd69fd": {},
                    "7661310a-7dc3-e855-1d82-7f7bb70319c7": {},
                    "8d26fcff-b200-5ba6-a36b-6bf75f33839e": {},
                    "d71cd104-0c18-2072-f92d-82b847d18ab5": {},
                    "f05453aa-e857-3dfd-90e1-d657d9b594a5": {}
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        }
    ],
    "properties": {
        "description": "",
        "id": "agendamentoProcuradoria",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Procuradoria - Agendamento",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "permission_rules": [
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"NVB\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "4dd344b6-5ff8-6608-a338-63d5c40ffc38",
                "permission_name": "NVB"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"MTG\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "73d59c6e-5d43-9985-020a-1564a2bd69fd",
                "permission_name": "MTG"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"BIC\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "f05453aa-e857-3dfd-90e1-d657d9b594a5",
                "permission_name": "BIC"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"BNI\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "d71cd104-0c18-2072-f92d-82b847d18ab5",
                "permission_name": "BNI"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"BCP\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "4ca43afb-7ca5-9595-7d5e-480f9e1269aa",
                "permission_name": "BCP"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"HPG\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "6fb83d36-30a3-de4b-f6ee-475a1d3c4ee1",
                "permission_name": "Hipoges (HPG)"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"NOR\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "7661310a-7dc3-e855-1d82-7f7bb70319c7",
                "permission_name": "Norfin (NOR)"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"DHM\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "1fa5eef4-6607-58b1-6a12-e2ed8ae717c9",
                "permission_name": "DHM"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.BeanShellPermission",
                    "properties": {"script": "import org.joget.commons.util.LogUtil;\n\n\nString banco_fundo = \"#form.detalhe_proce_procu.banco_fundo[{form.processos_procu.detalhe_processo}]#\";\nif(banco_fundo.equals(\"WHS\")){\n    return true;\n}else{\n    return false;\n}\n"}
                },
                "permission_key": "8d26fcff-b200-5ba6-a36b-6bf75f33839e",
                "permission_name": "Whitestar (WHS)"
            }
        ],
        "postProcessor": {
            "className": "",
            "properties": {}
        },
        "postProcessorRunOn": "create",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "agendamento_procu"
    }
}