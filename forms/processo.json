{
    "className": "org.joget.apps.form.model.Form",
    "elements": [{
        "className": "org.joget.apps.form.model.Section",
        "elements": [{
            "className": "org.joget.apps.form.model.Column",
            "elements": [
                {
                    "className": "org.joget.plugin.enterprise.MultiPagedForm",
                    "properties": {
                        "ajaxMode": "",
                        "css": "",
                        "displayMode": "tab",
                        "id": "multiPaged",
                        "nextButtonlabel": "Próximo",
                        "numberOfPage": {
                            "className": "11",
                            "properties": {
                                "page10_formDefId": "comunicacoes",
                                "page10_label": "Comunicações",
                                "page10_parentSubFormId": "comunicacoes",
                                "page10_readonly": "",
                                "page10_readonlyLabel": "",
                                "page10_subFormParentId": "id_processo",
                                "page10_validate": "",
                                "page11_formDefId": "geral",
                                "page11_label": "Operativa",
                                "page11_parentSubFormId": "geral",
                                "page11_readonly": "",
                                "page11_readonlyLabel": "",
                                "page11_subFormParentId": "id_processo",
                                "page11_validate": "",
                                "page1_formDefId": "menuPrincipal2",
                                "page1_label": "Resumo",
                                "page1_parentSubFormId": "detalhe_processo",
                                "page1_readonly": "",
                                "page1_readonlyLabel": "",
                                "page1_subFormParentId": "",
                                "page1_validate": "",
                                "page2_formDefId": "detalheProcesso",
                                "page2_label": "Processo",
                                "page2_parentSubFormId": "detalhe_processo",
                                "page2_readonly": "",
                                "page2_readonlyLabel": "",
                                "page2_subFormParentId": "",
                                "page2_validate": "",
                                "page3_formDefId": "intervenientes",
                                "page3_label": "Intervenientes",
                                "page3_parentSubFormId": "intervenientes",
                                "page3_readonly": "",
                                "page3_readonlyLabel": "",
                                "page3_subFormParentId": "id_processo",
                                "page3_validate": "",
                                "page4_formDefId": "documentos",
                                "page4_label": "Documentos",
                                "page4_parentSubFormId": "docs",
                                "page4_readonly": "",
                                "page4_readonlyLabel": "",
                                "page4_subFormParentId": "id_processo",
                                "page4_validate": "",
                                "page5_formDefId": "imoveis",
                                "page5_label": "Imóveis",
                                "page5_parentSubFormId": "imoveis",
                                "page5_readonly": "",
                                "page5_readonlyLabel": "",
                                "page5_subFormParentId": "id_processo",
                                "page5_validate": "",
                                "page6_formDefId": "banco",
                                "page6_label": "Banco",
                                "page6_parentSubFormId": "banco",
                                "page6_readonly": "",
                                "page6_readonlyLabel": "",
                                "page6_subFormParentId": "id_processo",
                                "page6_validate": "",
                                "page7_formDefId": "analiseBancaria",
                                "page7_label": "Análise Bancária",
                                "page7_parentSubFormId": "anal_banc",
                                "page7_readonly": "",
                                "page7_readonlyLabel": "",
                                "page7_subFormParentId": "id_processo",
                                "page7_validate": "",
                                "page8_formDefId": "analiseLegal",
                                "page8_label": "Análise Legal",
                                "page8_parentSubFormId": "anal_legal",
                                "page8_readonly": "",
                                "page8_readonlyLabel": "",
                                "page8_subFormParentId": "id_processo",
                                "page8_validate": "",
                                "page9_formDefId": "esclarecimentos",
                                "page9_label": "Diligências",
                                "page9_parentSubFormId": "esclarecimentos",
                                "page9_readonly": "",
                                "page9_readonlyLabel": "",
                                "page9_subFormParentId": "id_processo",
                                "page9_validate": ""
                            }
                        },
                        "onlyAllowSubmitOnLastPage": "",
                        "partiallyStore": "true",
                        "prevButtonlabel": "Anterior",
                        "storeMainFormOnPartiallyStore": "true"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "edicao_botoes_default",
                        "label": "",
                        "value": "<script type=\"text/javascript\">\r\n$(function(){\r\n    $(\"#assignmentComplete\").val(\"Concluir\");\r\n    $(\"#saveAsDraft\").val(\"Guardar\");\r\n\r\n});\r\n<\/script>"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "edicao_botoes_default",
                        "label": "",
                        "value": "<script type=\"text/javascript\">\r\n$(function(){\r\n    $(\"#assignmentComplete\").val(\"Concluir\");\r\n    $(\"#saveAsDraft\").val(\"Guardar\");\r\n \r\n});\r\n\r\n$(document).ready(function(){\r\n    \r\n    //console.log(\"#\"+\"form.processos.id\"+\"#\");\r\n    var processId='#form.processos.id#';\r\n    \r\n    //SUBMETER O PROCESSO A PRIMEIRA VEZ\r\n    /*if(processId == \"#\"+\"form.processos.id\"+\"#\"){\r\n         $(\"#saveAsDraft\").click();\r\n        \r\n    }*/\r\n    \r\n});\r\n<\/script>"
                    }
                }
            ],
            "properties": {"width": "100%"}
        }],
        "properties": {
            "comment": "",
            "id": "section1",
            "join": "",
            "label": "Plataforma Legal",
            "loadBinder": {
                "className": "",
                "properties": {}
            },
            "permission": {
                "className": "",
                "properties": {}
            },
            "permissionReadonly": "",
            "readonly": "",
            "readonlyLabel": "",
            "regex": "",
            "reverse": "",
            "storeBinder": {
                "className": "",
                "properties": {}
            },
            "visibilityControl": "",
            "visibilityValue": ""
        }
    }],
    "properties": {
        "description": "",
        "id": "processo",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "CHG - 1 - Processo",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "postProcessor": {
            "className": "org.joget.apps.app.lib.BeanShellTool",
            "properties": {"script": "import org.joget.apps.form.model.Element;\r\nimport org.joget.workflow.model.service.*;\r\nimport org.joget.commons.util.LogUtil;\r\nimport java.util.Arrays;\r\nimport org.joget.apps.form.model.Form;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport java.util.Map;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport org.joget.apps.app.model.AppDefinition;\r\nimport org.joget.apps.app.service.AppPluginUtil;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.plugin.base.ApplicationPlugin;\r\nimport org.joget.plugin.base.Plugin;\r\nimport org.joget.plugin.base.PluginManager;\r\nimport org.joget.plugin.property.model.PropertyEditable;\r\n \r\npublic Object execute(AppDefinition appDef, HttpServletRequest request) {\r\n    String ProcessID = workflowAssignment.getProcessId();\r\n    String Username = \"#currentUser.username#\";\r\n    String Performer = \"#process.activityInst.{assignment.activityDefId}.performer#\";\r\n    String LaneUser = \"user_\" + Performer;\r\n    String EstadoContratacao = \"#form.detalhe_processo.estado_contratacao[{form.processos.detalhe_processo}]#\";\r\n    String EstadoContratacaoEval = \"\";\r\n    String DetalheProcesso = \"#form.processos.detalhe_processo#\";\r\n    int SlaToApplyMin = 0;\r\n    \r\n    WorkflowManager wm = (WorkflowManager) pluginManager.getBean(\"workflowManager\");\r\n    \r\n    //Set workflow variables\r\n    // - Last Lane user for reasignment purposes\r\n    wm.processVariable(ProcessID, LaneUser , Username);\r\n    \r\n    LogUtil.info(\"BeanShell set WF Var\", \"Detalhe do Processo: \" + DetalheProcesso);\r\n    LogUtil.info(\"BeanShell set WF Var\", \"Estado de Contratacao: \" + EstadoContratacao);\r\n    \r\n/*    EstadoContratacaoEval = AppUtil.processHashVariable(EstadoContratacao,null,null,null);\r\n    LogUtil.info(\"BeanShell set WF Var\", \"Estado de Contratacao EVAL: \" + EstadoContratacaoEval);\r\n    \r\n    EstadoContratacao = \"#form.detalhe_processo.estado_contratacao#\";\r\n    LogUtil.info(\"BeanShell set WF Var\", \"Estado de Contratacao: \" + EstadoContratacao);\r\n    \r\n    */\r\n    \r\n    \r\n    //SlaToApplyMin = 5;\r\n    return null;\r\n}\r\n\r\nreturn execute(appDef, request);"}
        },
        "postProcessorRunOn": "both",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "processos"
    }
}