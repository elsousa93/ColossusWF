{
    "className": "org.joget.apps.form.model.Form",
    "elements": [{
        "className": "org.joget.apps.form.model.Section",
        "elements": [{
            "className": "org.joget.apps.form.model.Column",
            "elements": [
                {
                    "className": "org.joget.apps.form.lib.HiddenField",
                    "properties": {
                        "id": "id_processo",
                        "useDefaultWhenEmpty": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.plugin.enterprise.FormGrid",
                    "properties": {
                        "abortRelatedRunningProcesses": "",
                        "deleteFiles": "",
                        "deleteGridData": "",
                        "deleteMessage": "Delete row?",
                        "deleteSubformData": "",
                        "disabledAdd": "",
                        "disabledDelete": "",
                        "enableSorting": "",
                        "errorMessage": "Invalid number of rows",
                        "formDefId": "detalheDocumentoDistrates",
                        "height": "500",
                        "id": "field1",
                        "label": "LISTA DE DOCUMENTOS",
                        "loadBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "options": [
                            {
                                "format": "",
                                "formatType": "options",
                                "label": "Tipo do Documento",
                                "value": "tipo_documento",
                                "width": ""
                            },
                            {
                                "format": "",
                                "formatType": "text",
                                "label": "Estado do Documento",
                                "value": "estado_documento",
                                "width": ""
                            },
                            {
                                "format": "",
                                "formatType": "date",
                                "label": "Data de Validade",
                                "value": "data_validade",
                                "width": ""
                            }
                        ],
                        "pageSize": "20",
                        "readonly": "",
                        "readonlyLabel": "",
                        "showRowNumber": "",
                        "storeBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "submit-label-normal": "",
                        "submit-label-readonly": "",
                        "uniqueKey": "",
                        "validateMaxRow": "",
                        "validateMinRow": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "width": "900"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field4",
                        "label": "",
                        "permission_rules": {
                            "0dcd2bd8-587c-f62d-2114-0ab80db0f7a7": {},
                            "61ac1506-03a2-c3ca-8103-7e96c6eecd6c": {}
                        },
                        "value": "<script type=\"text/javascript\">\r\n$(function(){\r\n     $('.grid-action-add').html(\"<br> <b>ADICIONAR FICHEIRO ÚNICO<\/b>\"); \r\n     $('.grid-action-add').css(\"display\", \"inline\"); \r\n     $('.grid-action-add').css(\"vertical-align\", \"text-bottom\"); \r\n});\r\n<\/script>"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "visualizarPDF",
                        "label": "",
                        "permission_rules": {
                            "0dcd2bd8-587c-f62d-2114-0ab80db0f7a7": {},
                            "61ac1506-03a2-c3ca-8103-7e96c6eecd6c": {}
                        },
                        "value": "<div id=\"pdfPreview\" style=\"display:none;\">\r\n    <object\r\n      data=\"pdfFilePath\" width=\"100%\" height=\"100%\">\r\n      <iframe src=\"pdfFilePath\" width=\"100%\" height=\"100%\" style=\"border: none;\">\r\n        <p>Your browser does not support PDFs. <a href=\"pdfFilePath\">Download the PDF<\/a>.<\/p>\r\n      <\/iframe>\r\n    <\/object>\r\n<\/div>\r\n\r\n<script type=\"text/javascript\">\r\n\r\n $(document).change(function(){\r\n        var fileChange = sessionStorage.getItem(\"fileChange\");\r\n        \r\n        if(fileChange === \"SIM\"){\r\n            $(\"#multiPaged_5_documentos_field6_documento > a\").attr(\"href\",\"#\");\r\n            $(\"#multiPaged_5_documentos_field6_documento > a\").unbind(\"click\").bind(\"click\", function(e){\r\n                e.preventDefault();\r\n                alert(\"É necessário gravar o formulário antes de visualizar os ficheiros\");\r\n            });\r\n            \r\n        }\r\n });     \r\n \r\n /*\r\n //Função que faz a alteração do link dos documentos de modo a abri-los numa janela popup\r\n$(function(){\r\n    $(\"#multiPaged_5_documentos_field6_documento > a\").click(function(e){\r\n    url = $(this).attr(\"href\");\r\n    var found = url.match(/[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}_[0-9]+\\//gi);\r\n    console.log(found);\r\n    if(found!=null){\r\n        found=found[0].slice(0,-3);\r\n        \r\n        url=url.replace(/[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}_[0-9]+/gi, found);\r\n    }\r\n    var novoUrl = url.replace(/attachment=true/g,\"__a_=workflowPL&__u_=UV_PL_Geral\");\r\n    console.log(novoUrl);\r\n    \r\n    $(this).attr(\"href\",novoUrl);\r\n    if($(\"novoUrl:contains(.pdf.)\")){\r\n        e.preventDefault();\r\n        showPopupActionDialog(novoUrl);\r\n    }\r\n        \r\n    });\r\n});*/\r\n\r\nfunction saveFilesWarning(){\r\n    alert(\"É necessário guardar o formulário para aceder aos ficheiros\");\r\n}\r\n\r\n/*\r\n//Função que faz abrir a janela de popup para visualizar o ficheiro\r\nfunction showPopupActionDialog(url){\r\n    var wWidth = $(window).width();\r\n    var dWidth = wWidth * 0.9;\r\n    var wHeight = $(window).height();\r\n    var dHeight = wHeight * 0.9;\r\n    \r\n  \r\n        var previewObj = $( \"#pdfPreview\" ).clone().html(function(index,html){\r\n            return html.replace(/pdfFilePath/g, url);\r\n        });\r\n        \r\n        var inputDialog = $(previewObj).dialog({\r\n            autoOpen: true,\r\n            height: dHeight,\r\n            width: dWidth,\r\n            modal: true,\r\n            buttons: [\r\n                {\r\n                text: \"Fechar\",\r\n                  click: function() {\r\n                    inputDialog.dialog( \"close\" );\r\n                  }\r\n                }\r\n            ]\r\n        });\r\n}*/\r\n\r\n<\/script>"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field60",
                        "label": "",
                        "permission_rules": {
                            "0dcd2bd8-587c-f62d-2114-0ab80db0f7a7": {},
                            "61ac1506-03a2-c3ca-8103-7e96c6eecd6c": {}
                        },
                        "value": "<script>\n    $(document).ready(function(){\n        \n        $(\"div[id*=multiDocs]\").hide();\n        $(\"button#singleDocument\").hide();\n        \n        $(\"button#multipleDocuments\").click(function(e){\n            e.preventDefault();\n            $(\"a[class=grid-action-add]\").hide();\n            $(\"div[id*=multiDocs]\").show();\n            $(\"button#singleDocument\").show();\n            $(\"button#multipleDocuments\").hide();\n            \n        });\n        \n        $(\"button#singleDocument\").click(function(e){\n            e.preventDefault();\n            $(\"a[class=grid-action-add]\").show();\n            $(\"div[id*=multiDocs]\").hide();\n            $(\"button#multipleDocuments\").show();\n            $(\"button#singleDocument\").hide();\n            $(\"ul[class=form-fileupload-value]\").children().remove();\n        });\n        \n    });\n    \n<\/script>"
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.CustomHTML",
                    "properties": {
                        "autoPopulate": "",
                        "id": "field62",
                        "label": "",
                        "permission_rules": {
                            "0dcd2bd8-587c-f62d-2114-0ab80db0f7a7": {},
                            "61ac1506-03a2-c3ca-8103-7e96c6eecd6c": {}
                        },
                        "value": "<div>\r\n    <button id=\"multipleDocuments\">ADICIONAR VÁRIOS FICHEIROS<\/button>\r\n    <button id=\"singleDocument\">ADICIONAR APENAS UM FICHEIRO<\/button>\r\n<\/div>"
                    }
                }
            ],
            "properties": {"width": "100%"}
        }],
        "properties": {
            "comment": "",
            "id": "documentos",
            "join": "",
            "label": "Documentos",
            "loadBinder": {
                "className": "",
                "properties": {}
            },
            "permission": {
                "className": "",
                "properties": {}
            },
            "permissionReadonly": "",
            "readonly": "",
            "readonlyLabel": "",
            "regex": "",
            "reverse": "",
            "storeBinder": {
                "className": "",
                "properties": {}
            },
            "visibilityControl": "",
            "visibilityValue": ""
        }
    }],
    "properties": {
        "description": "",
        "id": "documentosDistrates",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "Distrates - Documentos",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "postProcessor": {
            "className": "",
            "properties": {}
        },
        "postProcessorRunOn": "create",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "documentos_dist"
    }
}